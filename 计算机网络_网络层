网络层：多个网络通过路由器互连成为一个互连网络
  重要的内容：
    （1）虚拟互连网络的概念
    （2）IP地址与物理地址的关系
    （3）传统的分类的IP地址（包括子网掩码）和无分类域间路由选择CIDR
    （4）路由选择协议的工作原理
  
  网络层提供的服务：
  （1）网络层向上只提供简单灵活的、无连接的、尽最大努力交付的数据报服务
  （2）网络层不提供服务质量的承诺
  
  网际协议IP：
  （1）地址解析协议ARP address resolution protocol
  （2）逆地址解析协议 RARP reverse address resolution protocol
  （3）网际控制报文协议 ICMP interent control message protocol
  （4）网际组管理协议 IGMP internet group management protocol
  
  将网络互相连接起来需要一些中间设备：
  （1）物理层：转发器 repeater
  （2）数据链路层：网桥/桥接器 bridge
  （3）网络层：路由器 router
  （4）上层：网关 gateway
  
  IP地址：RFC791文档
  1、IP地址及表示方法：三个阶段
  （1）分类的IP地址
  （2）子网的划分
  （3）构成超网
  
  分类的IP地址：
    IP地址::={<网络号>,<主机号>}
    
    ARP的四种典型情况：
    （1）发送方是主机，要把IP数据报发送到本网络上的另一个主机。这时用ARP找到目的主机的硬件地址。
    （2）发送方是主机要把IP数据报发送到另一个网络上的一个主机。这时用ARP找到本网络上的一个路由器的硬件地址。剩下的工作由这个路由器来完成
    （3）发送方是路由器，要把IP数据报发送到本网络上的主机。这时用ARP找到目的主机的硬件地址
    （4）发送方是路由器，要把IP数据报转发到另一个网络上的主机。这时用ARP找到本网络上的一个路由器的硬件地址。剩下的工作由这个路由器来完成
    
    IP数据报的格式*
    IP层转发分组的流程：
      分组转发算法：
      （1）从数据报的首部提取目的主机的Ip地址D，得出目的网络地址为N
      （2）若N就是与此路由器直接相连的某个网络地址，则进行直接交付，不需要再经过其他的路由器，直接把数据报交付给目的主机；否则就进行间接交付，执行（3）
      （3）若路由表中有目的地址为D的特定主机路由器，则把数据报传送给表中所指明的下一跳路由器，否则执行（4）
      （4）若路由表中有达到网络N的路由，则把数据报传送给路由表中所指明的下一跳路由器；否则执行（5）
      （5）若路由表中有一个默认路由，则把数据报传给路由表中致命的默认路由器；否则执行（6）
      （6）报告转发分组出错
      
  划分子网：subnetting
  IP地址::={<网络号>,<子网号>,<主机号>}
  子网掩码相位与得出IP地址的网络地址
  
  路由器在有子网情况下分组转发算法：
  （1）从收到的数据报的首部提取目的IP地址D
  （2）先判断是否为直接交付。对路由器直接相连的网络逐个进行检查：用个网络的子网掩码和D逐相位“与”，看结果是否和相应的网络地址匹配。若匹配，则把分组进行直接交付，转发任务结束。否则就是间接交付执行（3）
  （3）若路由表中有目的地址唯D的特定主机路由，则把数据报传送给路由表中所指明的吓一跳路由器；否则执行（4）
  （4）对路由表中的每一行（目的网络地址，子网掩码，下一跳地址），用其中的子网掩码和D逐相位与，其结果唯N。若N雨该行的目的网络地址匹配，则把数据报传送给该行致命的吓一跳路由器；否则，执行（5）
  （5）若路由表中有一个默认路由，则把数据报传送给路由表中所指明的默认路由器；否则执行（6）
  （6）报告转发分组出错
  
  构造超网CIDR
  IP地址::={<网络前缀>,<主机号>}
  使用二叉线索查找路由表
  
  网际控制报文协议ICMP
  ICMP报文的种类：ICMP差错报告报文、ICMP询问报文
  ICMP差错报告报文：
  （1）终点不可达
  （2）源点抑制
  （3）时间超时
  （4）参数问题
  （5）改变路由
  不应发送ICMP差错报告报文的几种情况：
  （1）对ICMP差错报告报文不再发送ICMP差错报告报文
  （2）对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文
  （3）对具有多播地址的数据报都不发送ICMP差错报告报文
  （4）对具有特殊地址的数据报不发送ICMP差错报告报文
  
  常用的ICMP询问报文有两种：回送请求和回答、时间戳请求和回答
  
  ICMP的一个重要应用：
  （1）PING Packet InterNet Groper
        用来测试两个主机之间的连通性
        PING是应用层直接使用网络层ICMP的一个例子。没有通过运输层TCP和UDP
  （2）tracert 用来跟踪一个分组从源点到终点的路径。
  
  路由选择协议
  （1）内部网关协议IGP（IRP）：RIP、OSPF
  （2）外部网关协议EGP（ERP）：BGP
  RIP：距离向量协议：
  （1）仅和相邻路由器交换信息
  （2）路由器交换的信息是当前本路由器所知道的全部信息，即自己的路由表
  （3）按固定的时间间隔交换路由信息
  OSPF：开放最短路径优先：链路状态协议
  
  BGP：路径向量路由选择协议
  （1）OPEN
  （2）UPDATE
  （3）KEEPALIVE
  （4）NOTIFICATION
  
  路由器的构成：转发分组
  （1）路由选择部分：（控制部分）构造路由表
        核心构件：路由选择处理机
        根据所选定的路由选择协议构造出路由表
  （2）分组转发部分：构造转发表
        交换结构
        输入端口
    三种常用的交换方法：通过存储器、通过总线、通过互联网络
    
  IP多播：IGMP协议
  虚拟专用网络：VPN和NAT/NAPT
        输出端口
